
# Preparamos el sistema
	sudo apt update
	sudo apt upgrade
	sudo apt install -y net-tools curl git autoconf

# Añadimos un usuario para no trabajar con nuestro usuario
	sudo adduser cuckoo
	cd /home/cuckoo/

# Instalamos Python 2.7
	curl https://bootstrap.pypa.io/pip/2.7/get-pip.py -o get-pip.py
	sudo apt install python2
	sudo python2 get-pip.py

# Instalamos las dependencias de python necesarias
	sudo apt-get install -y python-dev libffi-dev libssl-dev libfuzzy-dev libtool flex libjansson-dev
	sudo apt-get install -y python-setuptools
	#sudo apt install -y python-virtualenv
	sudo apt-get install -y libjpeg-dev zlib1g-dev swig systemtap

# Instalamos mongodb
	sudo apt-get install -y mongodb
	#curl -fsSL https://www.mongodb.org/static/pgp/server-4.4.asc | sudo apt-key add -
	#echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/4.4 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-4.4.list
	#sudo apt update
	#sudo apt-get install -y mongodb-org

# Instalamos PostgreSQL
sudo apt-get install -y postgresql libpq-dev

# Instalamos VirtualBox
	##Primera Opcion
		echo deb http://download.virtualbox.org/virtualbox/debian xenial contrib | sudo tee -a /etc/apt/sources.list.d/virtualbox.list
		wget -q https://www.virtualbox.org/download/oracle_vbox_2016.asc -O- | sudo apt-key add -
		sudo apt-get update
		sudo apt-get install virtualbox #se instala la última...

	##Segunda Opcion
		#curl https://download.virtualbox.org/virtualbox/5.2.44/VirtualBox-5.2.44-139111-Linux_amd64.run --output virtualbox_5.2.44.run
		#chmod +x ./virtualbox_5.2.44.run
		#./virtualbox_5.2.44.run
		#sudo apt install virtualbox-dkms

# Añadimos al usuario cuckoo al grupo de virtualbox
	sudo usermod -a -G vboxusers cuckoo
	##Deberemos abrir virtualbox, e instalar las maquinas virtuales en este usuario

# Instalamos tcpdump
	sudo apt-get install -y libcap2-bin tcpdump apparmor-utils
	sudo aa-disable /usr/sbin/tcpdump
	#Ubuntu tiene instalado y activado por defecto AppArmor

# Creamos un grupo de captura, añadimos al grupo al usuario cuckoo, y hacemos dueños de tcpdump a ese grupo
	sudo groupadd pcap
	sudo usermod -a -G pcap cuckoo
	sudo chgrp pcap /usr/sbin/tcpdump

	sudo setcap cap_net_raw,cap_net_admin=eip /usr/sbin/tcpdump
	getcap /usr/sbin/tcpdump #Para verificar los resultados del comando anterior

# Instalamos Volatility [OPCIONAL]
	git clone https://github.com/volatilityfoundation/volatility.git 
	cd volatility
	sudo python setup.py build
	sudo python setup.py install
	cd ..

# Instalamos Librerias
	sudo -H pip install distorm3==3.4.4
	sudo -H pip install yara-python==3.6.3
	sudo apt-get install -y ssdeep
	ssdeep -V
	sudo -H pip install pydeep
	pip show pydeep
	sudo -H pip install openpyxl
	sudo -H pip install ujson
	sudo -H pip install jupyter

# Instalamos M2Crypto
	sudo apt-get install -y swig
	sudo pip install m2crypto==0.24.0

# Instalamos guacd [OPCIONAL]
	#sudo apt-get install libguac-client-rdp0 libguac-client-vnc0 libguac-client-ssh0 guacd

	sudo apt install libpng-dev libcairo-dev

	#libguac ¿?
	git clone https://github.com/cmujedi/libguac.git
	cd libguac
	sudo autoreconf --install
	sudo ./configure
	sudo make
	sudo make install
	cd ..


	#libguac-client-rdp0 ¿?
	git clone https://github.com/cmujedi/libguac-client-rdp.git
	cd libguac-client-rdp
	sudo autoreconf --install
	sudo ./configure
	sudo make
	sudo make install
	cd ..

	#libguac-client-vnc0 ¿?
	git clone https://github.com/cmujedi/libguac-client-vnc.git
	cd libguac-client-vnc
	sudo autoreconf --install
	sudo ./configure
	sudo make
	sudo make install
	cd ..

	#guacd ¿?
	git clone https://github.com/cmujedi/guacd.git
	cd guacd
	sudo autoreconf --install
	sudo ./configure
	sudo make
	sudo make install
	cd ..


# Instalamos Cuckoo
sudo -H pip install -U pip setuptools
sudo -H pip install -U cuckoo
su cuckoo
cuckoo
